<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Corda Vertical Traveler">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iIzJjNWFhMCIvPgogIDx0ZXh0IHg9IjkwIiB5PSI5MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjQwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5DVlQ8L3RleHQ+Cjwvc3ZnPg==">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQ29yZGEgVmVydGljYWwgVHJhdmVsZXIiLCJzaG9ydF9uYW1lIjoiQ1ZUIiwic3RhcnRfdXJsIjoiLiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNmNWY3ZmEiLCJ0aGVtZV9jb2xvciI6IiMyYzVhYTAiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRnd0lpQm9aV2xuYUhROUlqRTRNQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajRLSUNBOGNtVmpkQ0IzYVdSMGFEMGlNVGd3SWlCb1pXbG5hSFE5SWpFNE1DSWdabWxzYkQwaUl6SmpOV0ZoTUNJdlBnb2dJRHgwWlhoMElIZzlJamt3SWlCNVBTSTVNQ0lnWm05dWRDMW1ZVzFwYkhrOUlrRnlhV0ZzTENCellXNXpMWE5sY21sbUlpQm1iMjUwTFhOcGVtVTlJalEwSWlCbWIyNTBMWGRsYVdkb2REMGlZbTlzWkNJZ1ptbHNiRDBpZDJocGRHVWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpSUdSNVBTSXVNMlZ0SWo1RFZsUThMM1JsZUhRK0Nqd3ZjM1puUGc9PSIsInNpemVzIjoiMTgweDM4MCIsInR5cGUiOiJpbWFnZS9zdmcreG1sIn1dfQ==">
    <title>Corda Vertical Traveler Timesheet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c5aa0, #1e4080);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .header-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            background: #f8fafc;
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #2c5aa0;
        }

        .section-title {
            font-size: 1.3rem;
            color: #2c5aa0;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        input, select, textarea {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #2c5aa0;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }

        .time-grid {
            display: grid;
            grid-template-columns: 200px repeat(7, 1fr) auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .time-header {
            font-weight: 600;
            color: #374151;
            text-align: center;
            padding: 10px;
            background: #f3f4f6;
            border-radius: 6px;
        }

        .tech-name {
            font-weight: 600;
            color: #2c5aa0;
            padding: 10px;
            background: #f0f4f8;
            border-radius: 6px;
        }

        .time-input {
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            text-align: center;
            font-size: 0.9rem;
            width: 100%;
        }

        .total-cell {
            font-weight: 600;
            color: #059669;
            text-align: center;
            padding: 8px;
            background: #ecfdf5;
            border-radius: 6px;
            min-width: 60px;
        }

        .travel-section {
            background: #fef3c7;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .travel-grid {
            display: grid;
            grid-template-columns: 200px repeat(7, 1fr);
            gap: 10px;
            align-items: center;
        }

        .job-details {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .job-table {
            width: 100%;
            border-collapse: collapse;
        }

        .job-table th,
        .job-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .job-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }

        .add-job-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .add-job-btn:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .summary-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .summary-card h3 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .summary-card p {
            opacity: 0.9;
        }

        .signature-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e5e7eb;
        }

        .signature-box {
            text-align: center;
            padding: 20px;
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            background: #fafafa;
        }

        @media (max-width: 768px) {
            .time-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .time-header,
            .tech-name {
                grid-column: 1;
            }
            
            .day-inputs {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .header-info {
                grid-template-columns: 1fr;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
        }

        /* iPad specific optimizations */
        @media (min-width: 768px) and (max-width: 1024px) {
            .container {
                margin: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .time-input {
                padding: 12px;
                font-size: 16px; /* Prevents zoom on focus */
                min-height: 44px; /* Apple's recommended touch target */
            }
            
            input, select, textarea {
                font-size: 16px; /* Prevents zoom on focus */
                min-height: 44px;
            }
            
            .add-job-btn {
                min-height: 44px;
                font-size: 16px;
                padding: 12px 20px;
            }
        }

        /* Touch-friendly improvements */
        .time-input:focus,
        input:focus,
        textarea:focus {
            transform: scale(1.02);
            transition: transform 0.2s ease;
        }

        .notes-section {
            margin-top: 20px;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 100px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CORDA VERTICAL TRAVELER</h1>
            <div class="header-info">
                <div class="info-card">
                    <label>Date:</label>
                    <input type="date" id="date">
                </div>
                <div class="info-card">
                    <label>Job Number:</label>
                    <input type="text" id="jobNum">
                </div>
                <div class="info-card">
                    <label>WO Number:</label>
                    <input type="text" id="woNum">
                </div>
                <div class="info-card">
                    <label>CO Number:</label>
                    <input type="text" id="coNum">
                </div>
            </div>
        </div>

        <div class="content">
            <div class="section">
                <div class="section-title">Client & Location Information</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Client:</label>
                        <input type="text" id="client">
                    </div>
                    <div class="form-group">
                        <label>Billing Address:</label>
                        <textarea id="billingAddress"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Location:</label>
                        <textarea id="location"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Contact:</label>
                        <input type="text" id="contact">
                    </div>
                    <div class="form-group">
                        <label>Contact Phone:</label>
                        <input type="tel" id="contactPhone">
                    </div>
                    <div class="form-group">
                        <label>Job Description:</label>
                        <input type="text" id="jobDescription">
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Time Tracking</div>
                
                <div class="time-grid">
                    <div class="time-header">Technician</div>
                    <div class="time-header">Mon</div>
                    <div class="time-header">Tue</div>
                    <div class="time-header">Wed</div>
                    <div class="time-header">Thu</div>
                    <div class="time-header">Fri</div>
                    <div class="time-header">Sat</div>
                    <div class="time-header">Sun</div>
                    <div class="time-header">Total</div>
                </div>

                <div id="techRows">
                    <!-- Technician rows will be populated by JavaScript -->
                </div>
                
                <div style="margin-top: 15px; text-align: center;">
                    <button class="add-job-btn" onclick="addTechnician()" style="background: #10b981;">+ Add Technician</button>
                </div>

                <div class="travel-section">
                    <h4 style="margin-bottom: 15px; color: #92400e;">Travel Time</h4>
                    <div id="travelRows">
                        <!-- Travel rows will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Job Details & Equipment</div>
                <div class="job-details">
                    <table class="job-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Equipment ID</th>
                                <th>Equipment Description</th>
                                <th>Pipe Size</th>
                                <th>Quantity</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="jobTableBody">
                            <!-- Job rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                    <button class="add-job-btn" onclick="addJobRow()">+ Add Equipment Entry</button>
                    <button class="add-job-btn" onclick="saveCopy()" style="background: #059669; margin-left: 10px;">üíæ Save Copy</button>
                    <button class="add-job-btn" onclick="printTimesheet()" style="background: #3b82f6; margin-left: 10px;">üìÑ Print/Export</button>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Notes & Comments</div>
                <div class="notes-section">
                    <textarea id="notes" placeholder="Enter any additional notes, comments, or special instructions..."></textarea>
                </div>
            </div>

            <div class="summary-cards">
                <div class="summary-card">
                    <h3 id="totalRegularHours">0</h3>
                    <p>Total Regular Hours</p>
                </div>
                <div class="summary-card">
                    <h3 id="totalTravelHours">0</h3>
                    <p>Total Travel Hours</p>
                </div>
                <div class="summary-card">
                    <h3 id="totalAllHours">0</h3>
                    <p>Grand Total Hours</p>
                </div>
            </div>

            <div class="signature-section">
                <div class="signature-box">
                    <h4>Technician Signature</h4>
                    <div style="margin: 20px 0;">
                        <input type="text" placeholder="Print Name" style="margin-bottom: 10px;">
                        <input type="date">
                    </div>
                </div>
                <div class="signature-box">
                    <h4>Client Representative</h4>
                    <div style="margin: 20px 0;">
                        <input type="text" placeholder="Print Name" style="margin-bottom: 10px;">
                        <input type="date">
                    </div>
                </div>
                <div class="signature-box">
                    <h4>Management Review</h4>
                    <div style="margin: 20px 0;">
                        <input type="text" placeholder="Print Name" style="margin-bottom: 10px;">
                        <input type="date">
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px; padding: 20px; border-top: 2px solid #e5e7eb;">
                <button class="add-job-btn" onclick="clearForm()" style="background: #ef4444; color: white;">üóëÔ∏è Clear Form & Start New</button>
            </div>
        </div>
    </div>

    <script>
        // Dynamic technicians array
        let technicians = [];
        let techCounter = 0;

        function createTechRow(tech) {
            const row = document.createElement('div');
            row.className = 'time-grid';
            row.id = `tech-row-${tech.id}`;
            row.innerHTML = `
                <div class="tech-name">
                    <input type="text" placeholder="Technician Name" value="${tech.name}" 
                           onchange="updateTechName('${tech.id}', this.value)" 
                           style="border: none; background: transparent; font-weight: 600; color: #2c5aa0; width: 100%;">
                    <button onclick="removeTechnician('${tech.id}')" style="background: #ef4444; color: white; border: none; padding: 2px 6px; border-radius: 3px; font-size: 0.7rem; margin-top: 5px;">Remove</button>
                </div>
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="mon" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="tue" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="wed" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="thu" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="fri" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="sat" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input" data-tech="${tech.id}" data-day="sun" onchange="updateTotals()">
                <div class="total-cell" id="total-${tech.id}">0</div>
            `;
            return row;
        }

        function createTravelRow(tech) {
            const row = document.createElement('div');
            row.className = 'travel-grid';
            row.id = `travel-row-${tech.id}`;
            row.innerHTML = `
                <div class="tech-name" id="travel-name-${tech.id}">${tech.name} (Travel)</div>
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="mon" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="tue" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="wed" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="thu" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="fri" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="sat" onchange="updateTotals()">
                <input type="number" step="0.5" class="time-input travel-input" data-tech="${tech.id}" data-day="sun" onchange="updateTotals()">
            `;
            return row;
        }

        function addTechnician(name = '') {
            techCounter++;
            const tech = {
                name: name || '',
                id: `tech${techCounter}`
            };
            
            technicians.push(tech);
            
            const techRowsContainer = document.getElementById('techRows');
            const travelRowsContainer = document.getElementById('travelRows');
            
            techRowsContainer.appendChild(createTechRow(tech));
            travelRowsContainer.appendChild(createTravelRow(tech));
            
            updateTotals();
            return tech;
        }

        function removeTechnician(techId) {
            if (technicians.length <= 1) {
                alert('You must have at least one technician.');
                return;
            }
            
            if (confirm('Are you sure you want to remove this technician?')) {
                // Remove from array
                technicians = technicians.filter(tech => tech.id !== techId);
                
                // Remove DOM elements
                const techRow = document.getElementById(`tech-row-${techId}`);
                const travelRow = document.getElementById(`travel-row-${techId}`);
                
                if (techRow) techRow.remove();
                if (travelRow) travelRow.remove();
                
                updateTotals();
            }
        }

        function updateTechName(techId, newName) {
            // Update in technicians array
            const tech = technicians.find(t => t.id === techId);
            if (tech) {
                tech.name = newName;
                
                // Update travel row name
                const travelNameElement = document.getElementById(`travel-name-${techId}`);
                if (travelNameElement) {
                    travelNameElement.textContent = `${newName} (Travel)`;
                }
            }
        }

        function initializeTechnicians() {
            // Start with one blank technician
            addTechnician();
        }

        function updateTotals() {
            let grandTotalRegular = 0;
            let grandTotalTravel = 0;

            technicians.forEach(tech => {
                let techTotal = 0;
                const inputs = document.querySelectorAll(`input[data-tech="${tech.id}"]:not(.travel-input)`);
                
                inputs.forEach(input => {
                    const value = parseFloat(input.value) || 0;
                    techTotal += value;
                });

                document.getElementById(`total-${tech.id}`).textContent = techTotal.toFixed(1);
                grandTotalRegular += techTotal;
            });

            // Calculate travel totals
            const travelInputs = document.querySelectorAll('.travel-input');
            travelInputs.forEach(input => {
                const value = parseFloat(input.value) || 0;
                grandTotalTravel += value;
            });

            document.getElementById('totalRegularHours').textContent = grandTotalRegular.toFixed(1);
            document.getElementById('totalTravelHours').textContent = grandTotalTravel.toFixed(1);
            document.getElementById('totalAllHours').textContent = (grandTotalRegular + grandTotalTravel).toFixed(1);
        }

        function addJobRow() {
            const tableBody = document.getElementById('jobTableBody');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="date" style="width: 100%; border: none; padding: 5px;"></td>
                <td><input type="text" placeholder="ID#" style="width: 100%; border: none; padding: 5px;"></td>
                <td><input type="text" placeholder="Equipment description" style="width: 100%; border: none; padding: 5px;"></td>
                <td><input type="text" placeholder="Size" style="width: 100%; border: none; padding: 5px;"></td>
                <td><input type="number" placeholder="Qty" style="width: 100%; border: none; padding: 5px;"></td>
                <td><button class="remove-btn" onclick="removeJobRow(this)">Remove</button></td>
            `;
            tableBody.appendChild(row);
        }

        function removeJobRow(button) {
            button.closest('tr').remove();
        }

        // Load saved data from localStorage
        function loadSavedData() {
            const savedData = localStorage.getItem('timesheetData');
            if (savedData) {
                const formData = JSON.parse(savedData);
                
                // Restore all input values
                Object.keys(formData).forEach(key => {
                    const element = document.getElementById(key) || 
                                  document.querySelector(`input[data-tech="${key.split('-')[0]}"][data-day="${key.split('-')[1]}"]${key.includes('travel') ? '.travel-input' : ':not(.travel-input)'}`);
                    if (element) {
                        element.value = formData[key];
                    }
                });
                
                updateTotals();
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date by default
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('date').value = today;
            
            initializeTechnicians();
            addJobRow(); // Add one initial job row
            loadSavedData(); // Load any previously saved data
        });

        // Auto-save functionality (stores in browser's local storage)
        function autoSave() {
            const formData = {};
            
            // Save all input values
            document.querySelectorAll('input, textarea, select').forEach(input => {
                if (input.id || (input.dataset.tech && input.dataset.day)) {
                    const key = input.id || `${input.dataset.tech}-${input.dataset.day}-${input.classList.contains('travel-input') ? 'travel' : 'regular'}`;
                    formData[key] = input.value;
                }
            });

            // Save to localStorage for persistence
            localStorage.setItem('timesheetData', JSON.stringify(formData));
            console.log('Auto-save triggered', formData);
        }

        // Auto-save every 30 seconds
        setInterval(autoSave, 30000);

        // Save on input changes
        document.addEventListener('input', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                setTimeout(autoSave, 1000); // Debounced save
            }
        });

        // Save Copy functionality
        function saveCopy() {
            // Save current state first
            autoSave();
            
            // Get current date and time for filename
            const now = new Date();
            const dateStr = now.toISOString().slice(0, 10); // YYYY-MM-DD
            const timeStr = now.toTimeString().slice(0, 5).replace(':', ''); // HHMM
            
            // Get job number for filename
            const jobNum = document.getElementById('jobNum').value || 'NoJob';
            const filename = `Timesheet_${jobNum}_${dateStr}_${timeStr}.html`;
            
            // Create a copy of the current HTML with all current data
            const currentHTML = document.documentElement.outerHTML;
            
            // Create a blob and download link
            const blob = new Blob([currentHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            // Create download link
            const downloadLink = document.createElement('a');
            downloadLink.href = url;
            downloadLink.download = filename;
            downloadLink.style.display = 'none';
            
            // Trigger download
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
            
            // Clean up URL
            URL.revokeObjectURL(url);
            
            // Show confirmation
            alert(`Timesheet saved as: ${filename}\n\nThis copy contains all your current data. The current form remains open for continued editing.`);
        }

        // Clear form for new timesheet
        function clearForm() {
            if (confirm('Are you sure you want to clear all data and start a new timesheet? This will reset all fields.')) {
                // Clear all inputs
                document.querySelectorAll('input, textarea, select').forEach(input => {
                    if (input.type === 'date') {
                        input.value = new Date().toISOString().slice(0, 10);
                    } else if (input.type === 'number') {
                        input.value = '';
                    } else {
                        input.value = '';
                    }
                });
                
                // Clear job table except header
                const jobTableBody = document.getElementById('jobTableBody');
                jobTableBody.innerHTML = '';
                addJobRow(); // Add one blank row
                
                // Update totals
                updateTotals();
                
                // Clear localStorage
                localStorage.removeItem('timesheetData');
                
                alert('Form cleared! Ready for new timesheet.');
            }
        }

        // Print/Export functionality
        function printTimesheet() {
            // Save current state before printing
            autoSave();
            
            // Use browser's print dialog
            window.print();
        }

        // Add print-specific CSS
        const printStyles = `
        @media print {
            body { 
                background: white !important; 
                padding: 10px !important;
                font-size: 12px !important;
            }
            .container {
                box-shadow: none !important;
                border-radius: 0 !important;
                max-width: none !important;
            }
            .add-job-btn {
                display: none !important;
            }
            .remove-btn {
                display: none !important;
            }
            .signature-section {
                page-break-inside: avoid;
                margin-top: 20px !important;
            }
            .section {
                page-break-inside: avoid;
                margin-bottom: 20px !important;
            }
        }`;
        
        const style = document.createElement('style');
        style.textContent = printStyles;
        document.head.appendChild(style);
    </script>
</body>
</html>
